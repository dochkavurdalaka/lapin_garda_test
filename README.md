# Calculator Server

Данный проект реализован в качестве решения тестового задания на конкурс в собеседование в компанию **"Гарда"**.

Проект реализует первые 10 пунктов технического задания и разработан на **C++** с использованием дополнительных библиотек.

---

## Структура проекта

В корневой структуре проекта находятся следующие файлы и папки:

- **`Client.cpp`** — код для CLI-клиента **Calculator Server**.
- **`Server.cpp`** — код серверной части **Calculator Server**.
- **`CMakeLists.txt`** — CMake-скрипт для сборки проекта.
- **`.clang-format`** — файл с настройками кодестайла, которому соответствует проект.
- **`Dockerfile`** — файл конфигурации Docker для запуска проекта.
- **`include/`** — папка с подключаемыми библиотеками.
- **`Client`** — бинарный файл CLI-клиента. Можно запустить в докере.
- **`Server`** — бинарный файл серверной части. Можно запустить в докере.
---

## Используемые библиотеки

1. **`cpp-httplib`**  
   Библиотека для написания клиент-серверных приложений.  
   Ссылка: [cpp-httplib](https://github.com/yhirose/cpp-httplib)  
   Файл: `include/httplib.h`

2. **`nlohmann::json`**  
   Библиотека для парсинга и передачи JSON-данных.  
   Ссылка: [nlohmann/json](https://github.com/nlohmann/json)  
   Файл: `include/json.hpp`

3. **`check_correct.h`**  
   Библиотека, написанная мной, содержит функцию для проверки численного выражения на синтаксическую корректность.
   Файл: `include/check_correct.h`

5. **`eval.h` и `calculator.h`**  
   Библиотеки, разработанные мной в ходе прохождения курса по **C++** от **Школы Анализа Данных Яндекс** , у которой совместная магистерская программа с **ННГУ имени Лобачевского**, на которой я обучаюсь.  
   Эти библиотеки не используют обратную польскую запись, а преобразуют исходное выражение в **AST** (Abstract Syntax Tree) на основе математического аппарата формальной грамматики.  
   Упрощенный вид грамматики приведен ниже:

   ![Грамматика](https://github.com/user-attachments/assets/0d143d84-cb44-499f-84cd-0378147d503b)

---
## Запуск проекта
Данный проект собирался и компилировался в системе Ubuntu 24.04 с использованием компилятора gcc-12.
Эти условия выставлены в `Dockerfile`.

### Установка проекта через Docker:
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/dochkavurdalaka/lapin_garda_test.git
   cd lapin_garda_test
2. Соберите образ докера и запустите контейнер:
   ```bash
   docker build -t lapin_garda_test .
   docker run -p 8080:8080 -it --name lapin_garda_test lapin_garda_test

Обратите внимание, что указаны порты 8080:8080 — их будет прослушивать сервер, и на них будет посылать сообщения клиент.

2. Перейдите в директорию с исходниками в контейнере:
   ```bash
   cd lapin_garda_test
   ```


Здесь вы можете собрать проект различными способами, можете в консоли собрать запустить cmake, можете подключиться к контейнеру через VSCode, открыть в нем папку с проектом, и IDE автоматически предоставит возможности по сборке проекта.
Так же присуствует возможность простого запуска бинарников:

   ```bash
   ./Server
   ./Client
   ```


---

## Использование программы
В этом разделе нужно описывать, как правильно взаимодействовать с программой.
После запуска сервера должно появиться следующее сообщение:

   ![image](https://github.com/user-attachments/assets/4427f191-d5c8-4886-a2ef-3067c312806c)
1. Команда **`echo`**:
   ```bash
   ./Client -c "echo"
   ```

   ![image](https://github.com/user-attachments/assets/4f610f74-9ed1-480c-ba7d-d8ef5607fd9e)

2. Команда вычисления простого целочисленного выражения:
   ```bash
   ./Client -e "-5*6 + (-7)*2 + 1"
   ```
   ![image](https://github.com/user-attachments/assets/b24c588d-a5ef-4ed0-96cb-cd14844aa9f7)

3. Команда вычисления выражения с плавающей запятой:
   ```bash
   ./Client -e "-5*6 + (-7)*2 + 1.0"
   ```
   ![image](https://github.com/user-attachments/assets/80974e6d-69ec-48c4-80d1-2fe352c5930d)

4. Попытка ввести некорректное выражение:
   ```bash
   ./Client -e "*6 + (-7)*2 + 1.0"
   ```
   ![image](https://github.com/user-attachments/assets/7425b7f5-8e56-4eef-aa04-207fef3f4b7e)

5. Поддержка переменных:
   ```bash
   ./Client -e "pi = 3.14"
   ./Client -e "pi"
   ```
   ![image](https://github.com/user-attachments/assets/b00ed333-aed8-4999-9d1e-eff076d872b5)


6. Поддержка многострочного ввода:
   ```bash
   ./Client -e "s = 2.5;\
   s = s * s + 1;\
   s"
   ```
   ![image](https://github.com/user-attachments/assets/2db8dc04-87c9-4a1c-83b6-64dc84579ce3)

7. Поддержка API для сброса состояния:
      ```bash
   ./Client -e "s = 2.5 + 1"
   ./Client -e "s"
   ./Client -c clean
   ./Client -e "s"
   ```
   ![image](https://github.com/user-attachments/assets/e83aaceb-3af1-48c0-a3e0-459415fd1202)
